{"version":3,"sources":["../src/admin.js"],"names":["MongoClient","require","db_url","db_name","Admin","text","parse_mode","client","connect","db","collection","cursor","find","forEach","doc","user","fromJSON","sendTextMessage","salary","Pay"],"mappings":";;;;;;;;AAAA;;;;AACA;;;;;;;;AACA,IAAMA,cAAcC,QAAQ,SAAR,EAAmBD,WAAvC;AACA,IAAME,SAAS,sEAAf;AACA,IAAMC,UAAU,WAAhB;;IACqBC,K;;;;;;;wCACMC,I,EAA0B;AAAA,gBAApBC,UAAoB,uEAAP,MAAO;;AAC7C;;AAEA,gBAAIC,SAAS,MAAMP,YAAYQ,OAAZ,CAAoBN,MAApB,CAAnB;AACA,gBAAMO,KAAKF,OAAOE,EAAP,CAAUN,OAAV,CAAX;AACA,gBAAMO,aAAaD,GAAGC,UAAH,CAAc,OAAd,CAAnB;AACA,gBAAIC,SAAS,MAAMD,WAAWE,IAAX,EAAnB;AACAD,mBAAOE,OAAP,CAAe,UAACC,GAAD,EAAQ;AACnB,oBAAIC,OAAO,eAAKC,QAAL,CAAcF,GAAd,CAAX;AACA,gCAAMG,eAAN,CAAsBF,IAAtB,EAA4BV,IAA5B,EAAkC,IAAlC,EAAwCC,UAAxC;AACH,aAHD;AAIH;;;oCAEkBS,I,EAAMG,M,EAAO;AAC5BH,iBAAKI,GAAL,CAASD,MAAT;AACA,4BAAMD,eAAN,CAAsBF,IAAtB,EAA4B,kBAAkBG,MAAlB,GAA2B,MAAvD;AACH;;;qCAEmBH,I,EAAMV,I,EAA0B;AAAA,gBAApBC,UAAoB,uEAAP,MAAO;;AAChD;;AAEA,4BAAMW,eAAN,CAAsBF,IAAtB,EAA4BV,IAA5B,EAAkC,IAAlC,EAAwCC,UAAxC;AACH;;;8CAE2B,CAE3B;;;;;;kBA3BgBF,K","file":"admin.js","sourcesContent":["import nMenu from './nmenu';\r\nimport User from './user';\r\nconst MongoClient = require('mongodb').MongoClient;\r\nconst db_url = 'mongodb://evkator:isl0952214823bag@ds249355.mlab.com:49355/vklikebot';\r\nconst db_name = 'vklikebot';\r\nexport default class Admin{\r\n    static async SendToAll(text, parse_mode = 'HTML'){\r\n        //sendTextMessage(user, text, reply_markup, parse_mode)\r\n\r\n        let client = await MongoClient.connect(db_url);\r\n        const db = client.db(db_name);\r\n        const collection = db.collection('users');\r\n        let cursor = await collection.find();\r\n        cursor.forEach((doc) =>{\r\n            let user = User.fromJSON(doc);\r\n            nMenu.sendTextMessage(user, text, null, parse_mode);\r\n        });\r\n    }\r\n\r\n    static async PayTo(user, salary){\r\n        user.Pay(salary);\r\n        nMenu.sendTextMessage(user, \"Вам подарок: \" + salary + \" руб\");\r\n    }\r\n\r\n    static async SendTo(user, text, parse_mode = 'HTML'){\r\n        //sendTextMessage(user, text, reply_markup, parse_mode)\r\n\r\n        nMenu.sendTextMessage(user, text, null, parse_mode);\r\n    }\r\n\r\n    static async checkAllTasks(){\r\n\r\n    }\r\n}"]}