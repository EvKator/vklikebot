{"version":3,"sources":["../src/Check.js"],"names":["request","require","cheerio","decode","Check","url","vk_id","pattern1","pattern","reg","RegExp","u","exec","likersUrl","result","respHtml","$","load","likers","toArray","some","el","attribs","href","slice","err","console","log","stack"],"mappings":";;;;;;;;;;AAAA,IAAMA,UAAUC,QAAQ,iBAAR,CAAhB;AACA,IAAMC,UAAUD,QAAQ,SAAR,CAAhB;AACA,IAAME,SAASF,QAAQ,WAAR,CAAf;;IAEqBG,K;;;;;;;uCACKC,G,EAAKC,K,EAAM;AAC7BD,kBAAMF,OAAOE,GAAP,CAAN;;AAEA,gBAAME,WAAW,wBAAjB;AACA,gBAAMC,UAAU,wBAAhB;AACA,gBAAIC,MAAM,IAAIC,MAAJ,CAAWF,OAAX,EAAoB,GAApB,CAAV;AACA,gBAAIG,IAAIF,IAAIG,IAAJ,CAASP,GAAT,CAAR;AACA,gBAAIQ,YAAY,8CAA8CF,EAAE,CAAF,CAA9C,GAAqD,QAArD,GAAgEA,EAAE,CAAF,CAAhE,GAAuE,QAAvE,GAAkFA,EAAE,CAAF,CAAlG;AACA,gBAAIG,SAAS,KAAb;AACA,gBAAI;AACA,oBAAIC,WAAW,MAAOf,QAAQa,SAAR,CAAtB;AACA,oBAAIG,IAAId,QAAQe,IAAR,CAAaF,QAAb,CAAR;AACA,oBAAIG,SAAUF,EAAE,eAAF,CAAD,CAAqBG,OAArB,EAAb;;AAEAL,yBAASI,OAAOE,IAAP,CAAY,UAACC,EAAD,EAAM;AACvB,2BAAOA,GAAGC,OAAH,CAAWC,IAAX,CAAgBC,KAAhB,CAAsB,CAAtB,MAA6BlB,KAApC;AACH,iBAFQ,CAAT;AAGH,aARD,CASA,OAAOmB,GAAP,EAAW;AACPC,wBAAQC,GAAR,CAAY,KAAZ;AACAD,wBAAQC,GAAR,CAAYF,IAAIG,KAAhB;AACH;AACD,mBAAOd,MAAP;AACH;;;;;;kBAxBgBV,K","file":"Check.js","sourcesContent":["const request = require('request-promise');\r\nconst cheerio = require('cheerio');\r\nconst decode = require('urldecode');\r\n\r\nexport default class Check{\r\n    static async hasLiked(url, vk_id){\r\n        url = decode(url);\r\n\r\n        const pattern1 = \"((video[^\\/]+)_[^\\/]+)\";\r\n        const pattern = \"((photo[^\\/]+)_[^\\/]+)\";\r\n        let reg = new RegExp(pattern, 'g');\r\n        let u = reg.exec(url);\r\n        let likersUrl = \"https://m.vk.com/like?act=members&object=\" + u[1] + \"&from=\" + u[1] + \"?list=\" + u[2];\r\n        let result = false;\r\n        try {\r\n            let respHtml = await  request(likersUrl);\r\n            let $ = cheerio.load(respHtml);\r\n            let likers = ($('a.inline_item')).toArray();\r\n\r\n            result = likers.some((el)=>{\r\n                return el.attribs.href.slice(1) === vk_id;\r\n            });\r\n        }\r\n        catch (err){\r\n            console.log('err');\r\n            console.log(err.stack);\r\n        }\r\n        return result;\r\n    }\r\n}"]}